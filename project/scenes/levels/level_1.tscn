[gd_scene load_steps=35 format=3 uid="uid://blevel01"]

[ext_resource type="Script" path="res://scripts/player.gd" id="1_player"]
[ext_resource type="Script" path="res://scripts/goal.gd" id="2_goal"]
[ext_resource type="Script" path="res://scripts/camera.gd" id="3_camera"]
[ext_resource type="Script" path="res://scripts/level_1_controller.gd" id="4_manager"]
[ext_resource type="Script" path="res://scripts/pause_menu.gd" id="5_pause"]

[sub_resource type="CircleShape2D" id="circle_player"]
radius = 20.0

[sub_resource type="RectangleShape2D" id="rect_floor"]
size = Vector2(1600, 20)

[sub_resource type="RectangleShape2D" id="rect_wall_l"]
size = Vector2(20, 1200)

[sub_resource type="RectangleShape2D" id="rect_wall_r"]
size = Vector2(20, 1200)

[sub_resource type="RectangleShape2D" id="rect_start_platform"]
size = Vector2(240, 18)

[sub_resource type="RectangleShape2D" id="rect_p1"]
size = Vector2(180, 18)

[sub_resource type="RectangleShape2D" id="rect_p2"]
size = Vector2(160, 18)

[sub_resource type="RectangleShape2D" id="rect_p3"]
size = Vector2(200, 18)

[sub_resource type="RectangleShape2D" id="rect_p4"]
size = Vector2(140, 18)

[sub_resource type="RectangleShape2D" id="rect_p5"]
size = Vector2(220, 18)

[sub_resource type="RectangleShape2D" id="rect_p6"]
size = Vector2(150, 18)

[sub_resource type="RectangleShape2D" id="rect_p7"]
size = Vector2(170, 18)

[sub_resource type="RectangleShape2D" id="rect_p8"]
size = Vector2(190, 18)

[sub_resource type="RectangleShape2D" id="rect_obstacle1"]
size = Vector2(100, 18)

[sub_resource type="RectangleShape2D" id="rect_obstacle2"]
size = Vector2(80, 18)

[sub_resource type="RectangleShape2D" id="rect_final_stretch"]
size = Vector2(300, 18)

[sub_resource type="CircleShape2D" id="circle_goal"]
radius = 30.0

[sub_resource type="Gradient" id="grad_trail"]
colors = PackedColorArray(0.95, 0.88, 0.72, 0.45, 0.95, 0.88, 0.72, 0.0)
offsets = PackedFloat32Array(0, 1)

[sub_resource type="Curve" id="curve_trail_w"]
_data = [Vector2(0, 1), 0.0, 0.0, 0, 0, Vector2(1, 0), 0.0, 0.0, 0, 0]
min_value = 0.0
max_value = 1.0

[node name="Level1" type="Node2D"]
script = ExtResource("4_manager")
process_mode = 1

[node name="Background" type="ColorRect" parent="."]
anchor_right = 1.0
anchor_bottom = 1.0
color = Color(0.07, 0.09, 0.15, 1)

[node name="Player" type="RigidBody2D" parent="."]
position = Vector2(120, 650)
script = ExtResource("1_player")
max_power = 1600.0
drag_radius = 100.0
drag_sensitivity = 1.5

[node name="CollisionShape2D" type="CollisionShape2D" parent="Player"]
shape = SubResource("circle_player")

[node name="Trail" type="Line2D" parent="Player"]
gradient = SubResource("grad_trail")
width_curve = SubResource("curve_trail_w")

[node name="LaunchParticles" type="CPUParticles2D" parent="Player"]
emitting = false
amount = 20
one_shot = true
explosiveness = 1.0
lifetime = 0.45
direction = Vector2(0, 0)
spread = 180.0
initial_velocity_min = 80.0
initial_velocity_max = 220.0
gravity = Vector2(0, 100)
scale_amount_min = 2.0
scale_amount_max = 5.0
color = Color(1, 0.95, 0.82, 0.6)

[node name="ImpactParticles" type="CPUParticles2D" parent="Player"]
emitting = false
amount = 12
one_shot = true
explosiveness = 1.0
lifetime = 0.35
direction = Vector2(0, -1)
spread = 120.0
initial_velocity_min = 40.0
initial_velocity_max = 140.0
gravity = Vector2(0, 250)
scale_amount_min = 1.5
scale_amount_max = 4.0
color = Color(0.8, 0.75, 0.65, 0.5)

[node name="TrailParticles" type="CPUParticles2D" parent="Player"]
emitting = false
amount = 20
lifetime = 0.5
direction = Vector2(0, 0)
spread = 360.0
initial_velocity_min = 3.0
initial_velocity_max = 12.0
gravity = Vector2(0, 0)
scale_amount_min = 1.0
scale_amount_max = 2.0
color = Color(1, 0.95, 0.85, 0.15)

[node name="Camera2D" type="Camera2D" parent="."]
position = Vector2(600, 400)
script = ExtResource("3_camera")
target = NodePath("../Player")
smooth_speed = 3.5
look_ahead = 0.1

[node name="Floor" type="StaticBody2D" parent="."]
position = Vector2(800, 950)

[node name="CollisionShape2D" type="CollisionShape2D" parent="Floor"]
shape = SubResource("rect_floor")

[node name="Visual" type="ColorRect" parent="Floor"]
offset_left = -800.0
offset_top = -10.0
offset_right = 800.0
offset_bottom = 10.0
color = Color(0.25, 0.27, 0.32, 1)

[node name="TopEdge" type="ColorRect" parent="Floor"]
offset_left = -800.0
offset_top = -12.0
offset_right = 800.0
offset_bottom = -10.0
color = Color(0.4, 0.42, 0.5, 0.6)

[node name="WallLeft" type="StaticBody2D" parent="."]
position = Vector2(-10, 500)

[node name="CollisionShape2D" type="CollisionShape2D" parent="WallLeft"]
shape = SubResource("rect_wall_l")

[node name="WallRight" type="StaticBody2D" parent="."]
position = Vector2(1610, 500)

[node name="CollisionShape2D" type="CollisionShape2D" parent="WallRight"]
shape = SubResource("rect_wall_r")

[node name="StartPlatform" type="StaticBody2D" parent="."]
position = Vector2(120, 680)

[node name="CollisionShape2D" type="CollisionShape2D" parent="StartPlatform"]
shape = SubResource("rect_start_platform")

[node name="Visual" type="ColorRect" parent="StartPlatform"]
offset_left = -120.0
offset_top = -9.0
offset_right = 120.0
offset_bottom = 9.0
color = Color(0.38, 0.42, 0.52, 1)

[node name="TopEdge" type="ColorRect" parent="StartPlatform"]
offset_left = -120.0
offset_top = -11.0
offset_right = 120.0
offset_bottom = -9.0
color = Color(0.55, 0.6, 0.72, 0.8)

[node name="Platform1" type="StaticBody2D" parent="."]
position = Vector2(280, 550)

[node name="CollisionShape2D" type="CollisionShape2D" parent="Platform1"]
shape = SubResource("rect_p1")

[node name="Visual" type="ColorRect" parent="Platform1"]
offset_left = -90.0
offset_top = -9.0
offset_right = 90.0
offset_bottom = 9.0
color = Color(0.38, 0.42, 0.52, 1)

[node name="TopEdge" type="ColorRect" parent="Platform1"]
offset_left = -90.0
offset_top = -11.0
offset_right = 90.0
offset_bottom = -9.0
color = Color(0.55, 0.6, 0.72, 0.7)

[node name="Platform2" type="StaticBody2D" parent="."]
position = Vector2(430, 420)

[node name="CollisionShape2D" type="CollisionShape2D" parent="Platform2"]
shape = SubResource("rect_p2")

[node name="Visual" type="ColorRect" parent="Platform2"]
offset_left = -80.0
offset_top = -9.0
offset_right = 80.0
offset_bottom = 9.0
color = Color(0.38, 0.42, 0.52, 1)

[node name="TopEdge" type="ColorRect" parent="Platform2"]
offset_left = -80.0
offset_top = -11.0
offset_right = 80.0
offset_bottom = -9.0
color = Color(0.55, 0.6, 0.72, 0.7)

[node name="Platform3" type="StaticBody2D" parent="."]
position = Vector2(580, 600)

[node name="CollisionShape2D" type="CollisionShape2D" parent="Platform3"]
shape = SubResource("rect_p3")

[node name="Visual" type="ColorRect" parent="Platform3"]
offset_left = -100.0
offset_top = -9.0
offset_right = 100.0
offset_bottom = 9.0
color = Color(0.38, 0.42, 0.52, 1)

[node name="TopEdge" type="ColorRect" parent="Platform3"]
offset_left = -100.0
offset_top = -11.0
offset_right = 100.0
offset_bottom = -9.0
color = Color(0.55, 0.6, 0.72, 0.7)

[node name="Platform4" type="StaticBody2D" parent="."]
position = Vector2(730, 480)

[node name="CollisionShape2D" type="CollisionShape2D" parent="Platform4"]
shape = SubResource("rect_p4")

[node name="Visual" type="ColorRect" parent="Platform4"]
offset_left = -70.0
offset_top = -9.0
offset_right = 70.0
offset_bottom = 9.0
color = Color(0.38, 0.42, 0.52, 1)

[node name="TopEdge" type="ColorRect" parent="Platform4"]
offset_left = -70.0
offset_top = -11.0
offset_right = 70.0
offset_bottom = -9.0
color = Color(0.55, 0.6, 0.72, 0.7)

[node name="Platform5" type="StaticBody2D" parent="."]
position = Vector2(880, 320)

[node name="CollisionShape2D" type="CollisionShape2D" parent="Platform5"]
shape = SubResource("rect_p5")

[node name="Visual" type="ColorRect" parent="Platform5"]
offset_left = -110.0
offset_top = -9.0
offset_right = 110.0
offset_bottom = 9.0
color = Color(0.38, 0.42, 0.52, 1)

[node name="TopEdge" type="ColorRect" parent="Platform5"]
offset_left = -110.0
offset_top = -11.0
offset_right = 110.0
offset_bottom = -9.0
color = Color(0.55, 0.6, 0.72, 0.7)

[node name="Platform6" type="StaticBody2D" parent="."]
position = Vector2(1050, 520)

[node name="CollisionShape2D" type="CollisionShape2D" parent="Platform6"]
shape = SubResource("rect_p6")

[node name="Visual" type="ColorRect" parent="Platform6"]
offset_left = -75.0
offset_top = -9.0
offset_right = 75.0
offset_bottom = 9.0
color = Color(0.38, 0.42, 0.52, 1)

[node name="TopEdge" type="ColorRect" parent="Platform6"]
offset_left = -75.0
offset_top = -11.0
offset_right = 75.0
offset_bottom = -9.0
color = Color(0.55, 0.6, 0.72, 0.7)

[node name="Platform7" type="StaticBody2D" parent="."]
position = Vector2(1200, 380)

[node name="CollisionShape2D" type="CollisionShape2D" parent="Platform7"]
shape = SubResource("rect_p7")

[node name="Visual" type="ColorRect" parent="Platform7"]
offset_left = -85.0
offset_top = -9.0
offset_right = 85.0
offset_bottom = 9.0
color = Color(0.38, 0.42, 0.52, 1)

[node name="TopEdge" type="ColorRect" parent="Platform7"]
offset_left = -85.0
offset_top = -11.0
offset_right = 85.0
offset_bottom = -9.0
color = Color(0.55, 0.6, 0.72, 0.7)

[node name="Platform8" type="StaticBody2D" parent="."]
position = Vector2(1350, 620)

[node name="CollisionShape2D" type="CollisionShape2D" parent="Platform8"]
shape = SubResource("rect_p8")

[node name="Visual" type="ColorRect" parent="Platform8"]
offset_left = -95.0
offset_top = -9.0
offset_right = 95.0
offset_bottom = 9.0
color = Color(0.38, 0.42, 0.52, 1)

[node name="TopEdge" type="ColorRect" parent="Platform8"]
offset_left = -95.0
offset_top = -11.0
offset_right = 95.0
offset_bottom = -9.0
color = Color(0.55, 0.6, 0.72, 0.7)

[node name="Obstacle1" type="StaticBody2D" parent="."]
position = Vector2(500, 350)

[node name="CollisionShape2D" type="CollisionShape2D" parent="Obstacle1"]
shape = SubResource("rect_obstacle1")

[node name="Visual" type="ColorRect" parent="Obstacle1"]
offset_left = -50.0
offset_top = -9.0
offset_right = 50.0
offset_bottom = 9.0
color = Color(0.6, 0.35, 0.35, 1)

[node name="Obstacle2" type="StaticBody2D" parent="."]
position = Vector2(950, 380)

[node name="CollisionShape2D" type="CollisionShape2D" parent="Obstacle2"]
shape = SubResource("rect_obstacle2")

[node name="Visual" type="ColorRect" parent="Obstacle2"]
offset_left = -40.0
offset_top = -9.0
offset_right = 40.0
offset_bottom = 9.0
color = Color(0.6, 0.35, 0.35, 1)

[node name="FinalStretch" type="StaticBody2D" parent="."]
position = Vector2(1500, 450)

[node name="CollisionShape2D" type="CollisionShape2D" parent="FinalStretch"]
shape = SubResource("rect_final_stretch")

[node name="Visual" type="ColorRect" parent="FinalStretch"]
offset_left = -150.0
offset_top = -9.0
offset_right = 150.0
offset_bottom = 9.0
color = Color(0.38, 0.42, 0.52, 1)

[node name="TopEdge" type="ColorRect" parent="FinalStretch"]
offset_left = -150.0
offset_top = -11.0
offset_right = 150.0
offset_bottom = -9.0
color = Color(0.55, 0.6, 0.72, 0.9)

[node name="Goal" type="Area2D" parent="."]
position = Vector2(1500, 390)
script = ExtResource("2_goal")

[node name="CollisionShape2D" type="CollisionShape2D" parent="Goal"]
shape = SubResource("circle_goal")

[node name="GoalParticles" type="CPUParticles2D" parent="Goal"]
emitting = false
amount = 30
one_shot = true
explosiveness = 1.0
lifetime = 0.8
direction = Vector2(0, 0)
spread = 180.0
initial_velocity_min = 60.0
initial_velocity_max = 200.0
gravity = Vector2(0, 50)
scale_amount_min = 2.0
scale_amount_max = 6.0
color = Color(0.4, 0.95, 0.55, 0.7)

[node name="GoalVisual" type="ColorRect" parent="Goal"]
offset_left = -30.0
offset_top = -30.0
offset_right = 30.0
offset_bottom = 30.0
color = Color(0.4, 0.95, 0.55, 0.3)

[node name="UI" type="CanvasLayer" parent="."]

[node name="ShotCounter" type="Label" parent="UI"]
offset_left = 24.0
offset_top = 18.0
offset_right = 220.0
offset_bottom = 50.0
theme_override_colors/font_color = Color(0.85, 0.82, 0.72, 0.75)
theme_override_font_sizes/font_size = 20
text = "Shots: 0"

[node name="RestartHint" type="Label" parent="UI"]
anchors_preset = 1
anchor_left = 1.0
anchor_right = 1.0
offset_left = -240.0
offset_top = 18.0
offset_right = -24.0
offset_bottom = 45.0
theme_override_colors/font_color = Color(0.7, 0.68, 0.6, 0.4)
theme_override_font_sizes/font_size = 14
text = "R - Restart  |  ESC - Pause"
horizontal_alignment = 2

[node name="HintLabel" type="Label" parent="UI"]
anchors_preset = 7
anchor_left = 0.5
anchor_top = 1.0
anchor_right = 0.5
anchor_bottom = 1.0
offset_left = -240.0
offset_top = -55.0
offset_right = 240.0
offset_bottom = -22.0
theme_override_colors/font_color = Color(0.8, 0.78, 0.7, 0.8)
theme_override_font_sizes/font_size = 15
text = "Navigate through obstacles to reach the goal. Click and drag to launch!"
horizontal_alignment = 1

[node name="LevelComplete" type="ColorRect" parent="UI"]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
color = Color(0.04, 0.06, 0.1, 0.88)
visible = false

[node name="CompletionLabel" type="Label" parent="UI/LevelComplete"]
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -220.0
offset_top = -80.0
offset_right = 220.0
offset_bottom = 80.0
theme_override_colors/font_color = Color(0.95, 0.9, 0.75, 1)
theme_override_font_sizes/font_size = 26
text = "Level Complete!"
horizontal_alignment = 1
vertical_alignment = 1

[node name="PauseMenu" type="Control" parent="UI"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
script = ExtResource("5_pause")

[node name="PausePanel" type="ColorRect" parent="UI/PauseMenu"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
color = Color(0.04, 0.06, 0.1, 0.85)
visible = false

[node name="VBoxContainer" type="VBoxContainer" parent="UI/PauseMenu/PausePanel"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -120.0
offset_top = -100.0
offset_right = 120.0
offset_bottom = 100.0
theme_override_constants/separation = 20

[node name="PauseLabel" type="Label" parent="UI/PauseMenu/PausePanel/VBoxContainer"]
layout_mode = 2
theme_override_font_sizes/font_size = 48
text = "PAUSED"
horizontal_alignment = 1
vertical_alignment = 1

[node name="ResumeButton" type="Button" parent="UI/PauseMenu/PausePanel/VBoxContainer"]
layout_mode = 2
text = "Resume (ESC)"
theme_override_font_sizes/font_size = 20

[node name="RestartButton" type="Button" parent="UI/PauseMenu/PausePanel/VBoxContainer"]
layout_mode = 2
text = "Restart Level (R)"
theme_override_font_sizes/font_size = 20

[node name="QuitButton" type="Button" parent="UI/PauseMenu/PausePanel/VBoxContainer"]
layout_mode = 2
text = "Quit to Menu"
theme_override_font_sizes/font_size = 20
